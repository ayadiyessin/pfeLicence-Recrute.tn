<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gestionnaire | Réclamation Entreprise</title>
  <link rel="icon" type="image/png" href="../dist/img/Recrutelogo.png">
  <link href="../dist/css/styessin.css" rel="stylesheet">
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="../plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
  
  <script>
    if(!localStorage.getItem("ID_ADM")){
      location.replace("login.html");
    }
  </script>
  <script language="JavaScript">
    function darkmode() {
  document.body.classList.add("dark-mode");
    }
    function nodark() {
  document.body.classList.remove("dark-mode");
    }
 function mode(){
  if (document.getElementById("demo5").checked) {
    darkmode(); //if the checkbox is checked, run this funtion
  } else {
    nodark(); //else run this funtion
  }
 }
  </script>
 <script>
  var url_string = window.location.href
    var url = new URL(url_string);
    var c = url.searchParams.get("id");   
  var request = new XMLHttpRequest()
// Open a new connection, using the GET request on the URL endpoint
request.open('GET', 'http://192.168.43.96:3000/reclamations/'+c, true)
request.onload = function()
{
    // Begin accessing JSON data here
    var data = JSON.parse(this.response)
    
    if(data.VUE_RECL=="0")
            {var url = "http://192.168.43.96:3000/reclamations/"+c;
                            
            var data1 = {};
            data1.SUJ_RECL= data.SUJ_RECL;
            data1.DESC_RECL= data.DESC_RECL;
            data1.CAPTU_RECL= data.CAPTU_RECL;
            data1.VUE_RECL= "1";
            data1.ID_RECRUTEUR= data.ID_RECRUTEUR;
            data1.ID_OFFRE= data.ID_OFFRE;
            data1.ID_DEMANDEUR= data.ID_DEMANDEUR;   
            data1.RESPONS_ENV_RECL= data.RESPONS_ENV_RECL;                                        
            var json = JSON.stringify(data1);
            var xhr = new XMLHttpRequest();
            xhr.open("PUT", url, true);
            xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
            xhr.onload = function () {
                var admins = JSON.parse(xhr.responseText);
                console.log(data1);
            }
            xhr.send(json);}
          }
// Send request
request.send()
</script>
  </head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Preloader -->
  <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="../dist/img/Recrute.fr.png" alt="AdminLTELogo" >
  </div>

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="../index.html" class="nav-link">Accueil</a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">

      <!-- Notifications Dropdown Menu -->
      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="#">
          <i class="far fa-bell"></i>
          <span id="nbtotalhaut" class="badge badge-warning navbar-badge"></span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
          <span class="dropdown-item dropdown-header"><span id="nbtotalmenu"></span> &ensp; Notifications</span> 
          <div class="dropdown-divider"></div>
          <a href="reclamation.html" class="dropdown-item">
            <i class="fas fa-copy mr-2"></i><span id="nbrecla"></span> &ensp;new réclamations
          </a>
          <div class="dropdown-divider"></div>
          <a href="contacts.html" class="dropdown-item">
            <i class="fas fa-comments mr-2"></i> <span id="nbrecontact"></span>&ensp;new contacts
          </a>
          <div class="dropdown-divider"></div>
          <a href="recruteurEnAttente.html" class="dropdown-item">
            <i class="fas fa-building mr-2"></i> <span id="nbrecrutEA"></span>&ensp;récruteur en attente
          </a>
          <div class="dropdown-divider"></div>
          <!--<div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
        </div>-->
      </li>
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
      <li class="nav-item">
        <!-- mta dark-->
        <input  type="checkbox" class="demo5 " onclick="mode()" id="demo5">
        <label for="demo5"></label>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->
 <!-- Main Sidebar Container -->
 <aside class="main-sidebar sidebar-dark-primary elevation-4">
  <!-- Brand Logo -->
  <a href="../index.html" class="brand-link">
    <img src="../dist/img/Recrutelogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
    <span class="brand-text font-weight-light">Recrute.tn</span>
  </a>

  <!-- Sidebar -->
  <div class="sidebar">
    <!-- Sidebar user panel (optional) -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex">
      <div class="image">
        <img src="" id="nvphoto" style="width:32px; height: 32px;" class="img-circle elevation-2" alt="User Image">
      </div>
      <div class="info">
        <a href="profileAdmin.html" class="d-block"id="nvprof"></a>
      </div>
    
    </div>

    <!-- SidebarSearch Form -->
    <div class="form-inline">
      <div class="input-group" data-widget="sidebar-search">
        <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
        <div class="input-group-append">
          <button class="btn btn-sidebar">
            <i class="fas fa-search fa-fw"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Sidebar Menu -->
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
        <!-- Add icons to the links using the .nav-icon class
             with font-awesome or any other icon font library -->
        <li class="nav-item ">
          <a href="../index.html" class="nav-link">
            <i class="nav-icon fas fa-tachometer-alt"></i>
            <p>
             Tableau De Bord
            </p>
          </a> 
        </li>
        <li class="nav-item">
          <a href="demandeur.html" class="nav-link">
            <i class="nav-icon fas fa-users"></i>
            <p>
              Demandeur D'emploi
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-building"></i>
            <p>
              Recruteur
              <i class="fas fa-angle-left right"></i>
              <span class="badge badge-info right">2</span>
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="recruteurEnAttente.html" class="nav-link">
                <i class="far fa-circle nav-icon"></i>
                <p>Recruteur en attente</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="recruteurconfirmer.html" class="nav-link">
                <i class="far fa-circle nav-icon"></i>
                <p>Recruteur confirmer</p>
              </a>
            </li>
          </ul>
        </li>
        <li class="nav-item menu-open">
          <a href="reclamation.html" class="nav-link active">
            <i class="nav-icon fas fa-copy"></i>
            <p>
              Réclamation
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="offre.html" class="nav-link">
            <i class="nav-icon fas fa-briefcase"></i>
            <p>
              Offre
            </p>
          </a>
        </li>
        <li class="nav-item ">
          <a href="contacts.html" class="nav-link">
            <i class="nav-icon fas fa-comments"></i>
            <p>
              Contacts
            </p>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-user"></i>
            <p>
              Gestionnaire
              <i class="fas fa-angle-left right"></i>
              <span class="badge badge-info right">2</span>
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="formajoutadmin.html" class="nav-link">
                <i class="far fa-circle nav-icon"></i>
                <p>Ajouter</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="listadmin.html" class="nav-link">
                <i class="far fa-circle nav-icon"></i>
                <p>Lister</p>
              </a>
            </li>
          </ul>
        </li>
          <div class="user-panel mt-3 pb-3 mb-3 d-flex">
          </div>
        <li class="nav-item">
          <a href="#" onclick="quitter()" class="nav-link">
            <i class="nav-icon fas fa-lock"></i>
            <p>
              Deconexion 
            </p>
          </a>
        </li>
      </ul>
    </nav>
    <!-- /.sidebar-menu -->
  </div>
  <!-- /.sidebar -->
</aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Réclamation Entreprise</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="../index.html">Accueil</a></li>
              <li class="breadcrumb-item active"><a href="reclamation.html?id=#entreprise">Réclamation entreprise</a></li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>


    <div class="row">
        
        <!-- /.col -->
        <div class="col-md-1"></div>
        <div class="col-md-10">
          <!-- Box Comment -->
          <div class="card card-widget">
            <div class="card-header">
              <div class="user-block">
                <img id="imgenvRECL" class="img-circle" src="" alt="User Image">
                <span class="username"><a id="nomenvRECL" href="#"data-toggle="modal" data-target="#modal-demandeur"></a></span>
                <span id="dateRECL" class="description"></span>
              </div>
              <!-- /.user-block -->
              <div class="card-tools">
               <a href="reclamation.html?id=#demandeur"> <button type="button" class="btn btn-tool" >
                  <i class="fas fa-times"></i>
                </button></a>
              </div>
              <!-- /.card-tools -->
            </div>
            <!-- /.card-header -->
            <div class="card-body">   

                    <div class="row">
                    <div class="filtr-item col-sm-3 " data-category="1" data-sort="white sample">
                      <a id="imgCAPa" href="" data-toggle="lightbox" data-title="Capture - Reclamation">
                        <img id="imgCAPi" src="" class="img-fluid mb-4" alt="white sample"/>
                      </a>
                    </div>
                    <div class="col-sm-9">
                    <div class="attachment">
                        <h4 id="sujRECL" class="attachment-heading"></h4>
      
                        <div id="descRECL" class="attachment-text">
                        </div>
                    </div>
                        <!-- /.attachment-text -->
                      </div>
                    </div>
            </div>
            <!-- /.card-body -->
          </div>
            <div class="card card-widget">
                <div class="card-header">
                  <div class="user-block">
                    <b>Recruteur Concernée</b>
                  </div>
                  <!-- /.user-block -->
                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                      <i class="fas fa-minus"></i>
                    </button>
                  </div>
                  <!-- /.card-tools -->
                </div>
                <!-- /.card-header -->
                <div id="cotenuREC" class="card-body">
                    <div class="row" >
                      <div class="col-sm-12">
                        <!-- Widget: user widget style 1 -->
                        <div class="card card-widget widget-user">
                          <!-- Add the bg color to the header using any of the bg-info nbedel colour profile classes -->
                          <div class="widget-user-header badge-success ">
                            <h4 class="widget-user-desc" id="NOM_ENT" ></h4>
                            <h3 class="widget-user-username" id="SEC_DACT_ENT"></h3>
                           
                          </div>
                          <div class="widget-user-image">
                            <img class="img-circle elevation-2" src="" id="LOGO_ENT" style="width:100px; height: 100px;" alt="User Avatar">
                          </div>
                          <div class="card-footer">
                            <div class="row">
                              <div class="col-sm-4 border-right">
                                <div class="description-block">
                                  <span class="description-text">Identifiant Unique</span>
                                  <h5 class="description-header" id="IDENT_UNQ_ENT"></h5>
                                </div>
                                <!-- /.description-block -->
                              </div>
                              <!-- /.col -->
                              <div class="col-sm-4 border-right">
                                <div class="description-block">
                                  <span class="description-text">Email</span>
                                  <b><a href="" class="btn-link text-secondary" id="EMAIL_ENTh"><h5 class="description-header" id="EMAIL_ENT"></h5></a></b>
                                </div>
                                <!-- /.description-block -->
                              </div>
                              <!-- /.col -->
                              <div class="col-sm-4">
                                <div class="description-block">
                                  <span class="description-text">Numéro téléphone</span>
                                  <h5 class="description-header" id="NUM_TEL_ENT"></h5>
                                </div>
                                <!-- /.description-block -->
                              </div>
                
                              
                              <!-- /.col -->
                            </div>
                            <br>
                                
                            <div class="post"> </div>
                                <div class="card-body">
                                    <div class="row">
                                      <div class="col-12 col-md-12 col-lg-8 order-2 order-md-1">
                                        <div class="row">
                                          <div class="col-12 col-sm-4">
                                            <div class="info-box bg-light">
                                              <div class="info-box-content">
                                                <span class="info-box-text text-center mb-1 "><h5>Pays d'origine</h5></span>
                                                <span class="info-box-number text-center text-muted mb-0" id="PAYS_ORG_ENT"></span>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-12 col-sm-4">
                                            <div class="info-box bg-light">
                                              <div class="info-box-content">
                                                <span class="info-box-text text-center mb-1"><h5>Total des salariés</h5></span>
                                                <span class="info-box-number text-center text-muted mb-0"id="NB_SAL_ENT" ></span>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-12 col-sm-4">
                                            <div class="info-box bg-light">
                                              <div class="info-box-content">
                                                <span class="info-box-text text-center mb-1"><h5>Date de création</h5></span>
                                                <span class="info-box-number text-center text-muted mb-0"id="DAT_CREA_ENT"></span>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row">
                                          <div class="col-12">
                                            <i class="fas fa-user"></i>&ensp;&ensp; <b>Profile</b>
                                            <div class="post"></div>  
                                            <div class="post">
                                                <!-- /.user-block -->
                                                <p id="DESC_ENT"></p>
                                              </div>
                          
                                              
                                              
                                          </div>
                                        </div>
                                        <div class="row">
                                          <div class="col-12">
                                            <i class="fas fa-map-marked-alt"></i>&ensp;&ensp; <b>Localisation</b>
                                            <div class="post"></div>  
                                                <!-- /.user-block -->
                                                <div id="map" class="sty"></div>   
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-12 col-md-12 col-lg-4 order-1 order-md-2">
                                        <div class="info-box bg-light">
                                          <div class="info-box-content">
                                            <h5 class="mt-1 ">Site Web</h5>
                                            <ul class="list-unstyled">
                                              <li>
                                                <a href=""id="URL_WEB_ENT" class="btn-link text-secondary"><i class="fas fa-globe"></i>&ensp;&ensp; Site Web</a>
                                              </li>
                                            </ul>
                                            <h5 class="mt-1 ">Linkedin</h5>
                                            <ul class="list-unstyled">
                                              <li>
                                                <a href=""id="URL_LINK_ENT" class="btn-link text-secondary"><i class="fas fa-globe"></i>&ensp;&ensp; Linkedin</a>
                                              </li>
                                            </ul>
                                            <h5 class="mt-1 ">Facebook</h5>
                                            <ul class="list-unstyled">
                                              <li>
                                                <a href=""id="URL_FB_ENT" class="btn-link text-secondary"><i class="fas fa-globe"></i>&ensp;&ensp; Facebook</a>
                                              </li>
                                            </ul>
                                           
                                            <h5 class="mt-1 ">Responsable sur l'entreprise</h5>
                                            <ul class="list-unstyled">
                                              <li>
                                                <a href="" class="btn-link text-secondary" id="EMAIL_RECh"><i class="fas fa-envelope"></i>&ensp;&ensp; <span id="EMAIL_REC"></span> </a>
                                              </li>
                                            </ul>
                                            <h5 class="mt-1 ">Adresse</h5>
                                            <ul class="list-unstyled">
                                              <li>
                                                  <a href="" class="btn-link text-secondary"><i class="fas fa-map-marker-alt"></i>&ensp;&ensp; <span id="ADRESSE_ENT"></span></a>
                                              </li>
                                                </ul>
                                            <h5 class="mt-1 ">Horaires </h5>
                                            <ul class="list-unstyled" id="horaireconf">
                                              
                                              
                                            </ul>
                                          </div>
                                        </div>
                                       
                                      </div>
                                    </div>
                                  </div>
                            <!-- /.row -->
                          </div>
                        
                        <!-- /.widget-user -->
                      
                      <!-- /.content -->
                      <section class="content  ">
                        <form>
                            <div class="card-body ">
                              <a id="archiveREC" class="btn btn-danger  float-right" href="#" onclick="updateREC()">
                                <i class="fas fa-archive"></i>    
                              </a>
                              <a class="btn btn-primary float-right " href="" id="mailRECL" style="margin-right: 5px;">
                                <i class="fas fa-envelope"></i>
                              </a> 
                            </div>
                          </form>

                          
                       
                    </section>
                  </div>
                    </div>
                  </div>
                </div>
            </div>
          <!-- /.card -->
        <!-- .modal -->
        <div class="modal fade" id="modal-demandeur">
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-8">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Profile Demandeur D'emploi</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" >&times;</span>
                    </button>
                </div>
                <div class="modal-body" >
                    <div class="embed-responsive ">
                        
                        <section class="content">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-md-12">
                                    <div class="card">
                                        <div class="row">
                                        <div class="col-md-3 ">
                                    <!-- Profile Image -->
                                            <div class="card-body "> 
                                                <div class="text-center">
                                                    <img style="width: 100px; height: 100px;" id="photoDEMRECL" class="profile-user-img img-fluid img-circle" src="" alt="User profile picture">
                                                </div>
                                
                                                <h3 id="nompreDEMRECL" class="profile-username text-center"></h3>
                                                <p id="specDEMRECL" class="text-muted text-center"></p>
                                
                                                <ul class="list-group list-group-unbordered mb-3">
                                                    <li class="list-group-item">
                                                        <i class="fas fa-address-book"></i>&ensp;&ensp;<b>Contact</b> 
                                                        <br>&ensp;&ensp;&ensp;<i class="fas fa-map-marked-alt"></i>&ensp;&ensp;<span id="paysvilleDEMRECL"></span>
                    
                                                        <br>&ensp;&ensp;&ensp;<i class="fas fa-map-marker-alt"></i>&ensp;&ensp;<span id="adressecopDEMRECL"></span> 
                    
                                                        <br>&ensp;&ensp;&ensp;<i class="fas fa-phone-alt"></i>&ensp;&ensp;<span id="numtelDEMRECL"></span> 
                    
                                                        <br>&ensp;&ensp;&ensp;<i class="fas fa-envelope"></i>&ensp;&ensp; <a id="emailDEMRECL" href="" class="btn-link text-secondary"></a>
                    
                                                        <br>&ensp;&ensp;&ensp;<i class="fab fa-linkedin"></i>&ensp;&ensp; <a id="urllinkDEMRECL" href="" class="btn-link text-secondary"></a>
                    
                                                        <br>&ensp;&ensp;&ensp;<i class="fab fa-facebook"></i>&ensp;&ensp; <a id="urlfbDEMRECL" href="" class="btn-link text-secondary"></a>
                                                    </li>
                                                    <li class="list-group-item">
                                                      <i class="fas fa-venus-mars"></i>&ensp;&ensp;<b>Sexe</b>
                                                      <ul>
                                                          <li id="sexeDEMRECL"></li>
                                                      </ul> 
                                                    </li>
                                                    <li class="list-group-item">
                                                        <i class="fas fa-calendar-alt"></i>&ensp;&ensp;<b>Date de naissance</b>
                                                        <ul>
                                                            <li id="datnaisDEMRECL"></li>
                                                        </ul> 
                                                    </li>
                                                    <li class="list-group-item">
                                                        <i class="fas fa-car"></i>&ensp;&ensp;<b>Permis de conduire</b>
                                                        <ul>
                                                            <li id="listpermisRECL"> <span id="permisDEMRECL">  </li>
                                                        </ul> 
                                                    </li>
                                                <li class="list-group-item">
                                                    <i class="fas fa-medal"></i>&ensp;&ensp;<b>Qualité</b>
                                                    <ul id="qualiteDEMRECL">
                                                    </ul> 
                                                </li>
                                                <li class="list-group-item">
                                                    <i class="fas fa-book "></i>&ensp;&ensp; <b>Langues</b>
                                                    <ul id="listlangueDEMRECL">
                                                    </ul>
                                                </li>
                                                <li class="list-group-item">
                                                    <i class="fas fa-star"></i>&ensp;&ensp; <b>Centres D'intérêts</b>
                                                    <ul id="centreintDEMRECL">
                                                    </ul>
                                                </li>
                                                <li class="list-group-item">
                                                    <i class="fas fa-calendar-alt"></i>&ensp;&ensp; <b>Date de création</b>
                                                    <ul>
                                                    <li id="datecreaDEMRECL"></li>
                                                </ul> 
                                                </li>
                                                <li class="list-group-item">
                                                <i class="fas fa-calendar-alt"></i>&ensp;&ensp; <b>Date mise à jour</b>
                                                <ul>
                                                    <li id="datemsjDEMRECL"></li>
                                                </ul> 
                                            </li>
                                                </ul>
                                            <!-- /.card -->
                                            </div>
                                            <!-- /.card-body -->
                                        </div>
                                        <!-- /.col -->
                                        <div class="col-md-9">
                                            <blockquote>
                                            <div class="card-body">
                                                <div class="tab-content">
                                                    <div class="active tab-pane">
                                                    <i class="fas fa-user"></i>&ensp;&ensp;<b>Profile</b>
                                                    <ul class="list-group list-group-unbordered mb-3">
                                                        
                                                        <li id="listprofilRECL" class="list-group-item"> 
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-award"></i>&ensp;&ensp;<b>Expérience Professionnelle</b> </li>
                                                        <li id="listEXPRECL" class="list-group-item">
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-user-graduate"></i>&ensp;&ensp;<b>Diplôme</b> </li>
                                                        <li id="listDIPRECL" class="list-group-item">
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-graduation-cap"></i>&ensp;&ensp;<b>Formation</b> </li>
                                                        <li id="listFORRECL" class="list-group-item">
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-certificate"></i>&ensp;&ensp;<b>Certifications</b></li>
                                                        <li id="listCERTRECL" class="list-group-item"> 
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-trophy"></i>&ensp;&ensp;<b>Projets</b></li>
                                                        <li id="listPROJRECL" class="list-group-item">
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-puzzle-piece"></i>&ensp;&ensp;<b>Vie Associative</b></li>
                                                        <li id="listVARECL" class="list-group-item"> 
                                                        </li>
                                                        <li class="list-group-item"><i class="fas fa-tasks"></i>&ensp;&ensp;<b>Compétences</b></li>
                                                        <li id="pasCOMPRECL" class="list-group-item"> 
                                                             
                                                        </li>
                                                    </ul> 
                                                    </div>
                                                    <!-- /.tab-pane -->  
                                                </div>
                                                <!-- /.tab-content -->
                                            </div>
                                            <!-- /.card-body -->
                                            </blockquote>
                                        </div>
                                        <!-- /.col -->
                                    </div>
                                    <!-- /.row -->
                                    </div>
                                    </div>
                                    <!-- /.col -->
                                </div>
                                <!-- /.row -->
                            </div>
                            <!-- /.container-fluid -->
                        </section>
                        <!-- /.content -->

                    </div>
                </div>
                
            </div>
            <!-- /.modal-content -->
            
            </div>
            <!-- /.modal-dialog -->
            </div>
        </div>
        
        <!-- /.modal -->
        </div>
        </div>
        <!-- /.col -->
      </div>

    
    <!-- /.content -->
    <a id="back-to-top" href="#" class="btn btn-primary back-to-top" role="button" aria-label="Scroll to top">
      <i class="fas fa-chevron-up"></i>
    </a>
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">

    <strong>&copy; 2021-2022 <a href="../index.html">Recrute</a>.</strong>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->
<!--alert-->
<script src="https://unpKg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../plugins/ekko-lightbox/ekko-lightbox.min.js"></script>
<script src="../plugins/filterizr/jquery.filterizr.min.js"></script>
<script src="../plugins/datatables/jquery.dataTables.min.js"></script>
<script src="../plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="../plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="../plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="../plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="../plugins/jszip/jszip.min.js"></script>
<script src="../plugins/pdfmake/pdfmake.min.js"></script>
<script src="../plugins/pdfmake/vfs_fonts.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../dist/js/notific.js"></script>
<!-- DataTables  & Plugins -->
<!-- AdminLTE App -->

<script>
    $(function () {
      $(document).on('click', '[data-toggle="lightbox"]', function(event) {
        event.preventDefault();
        $(this).ekkoLightbox({
          alwaysShowClose: true
        });
      });
  
      $('.filter-container').filterizr({gutterPixels: 3});
      $('.btn[data-filter]').on('click', function() {
        $('.btn[data-filter]').removeClass('active');
        $(this).addClass('active');
      });
    })
  </script>
  <script>
    var liste =["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];
    var url_string = window.location.href ;
    var url = new URL(url_string); 
    var c = url.searchParams.get("id"); 
    var idREC;
    console.log(c);
    // Post a user
    var url3 = "http://192.168.43.96:3000/reclamations/" + c ;
    var xhr3 = new XMLHttpRequest();
    xhr3.open("GET", url3, true);
    xhr3.onload = function () {
      var data = JSON.parse(xhr3.responseText);
      console.log(data);
      if (xhr3.readyState == 4 && xhr3.status == "200") {
        idREC = data.ID_RECRUTEUR;

        document.getElementById("sujRECL").innerHTML =data.SUJ_RECL;
        document.getElementById('descRECL').innerHTML =data.DESC_RECL;
        document.getElementById("imgCAPa").href =data.CAPTU_RECL;
        document.getElementById("imgCAPi").src = data.CAPTU_RECL;
            var request = new XMLHttpRequest();
            request.open('GET', "http://192.168.43.96:3000/demandeurs/"+data.ID_DEMANDEUR, true);
            request.onload = function()
            {
              var data2 = JSON.parse(this.response);
               document.getElementById("imgenvRECL").src = data2.PHOTO_DEM;
               document.getElementById("nomenvRECL").innerHTML = data2.NOM_DEM +' '+data2.PRE_DEM;
               document.getElementById("nomenvRECL").onclick = alertdemRECL(data.ID_DEMANDEUR);
            }
            request.send();
                                   /*
        **************
        ************
        **********
        */
        var request2 = new XMLHttpRequest()
        // Open a new connection, using the GET request on the URL endpoint
        request2.open('GET', 'http://192.168.43.96:3000/recruteurs/' + idREC, true)
        request2.onload = function()
        {
            // Begin accessing JSON data here
            var data = JSON.parse(this.response)
            console.log(data);
            if (request2.readyState == 4 && request2.status == "200") {
              if(data.ARCHIV_REC == "0"){
              document.getElementById("NOM_ENT").innerHTML=data.NOM_ENT;
              document.getElementById("SEC_DACT_ENT").innerHTML=data.SEC_DACT_ENT;
              document.getElementById("IDENT_UNQ_ENT").innerHTML=data.IDENT_UNQ_ENT;
              document.getElementById("EMAIL_ENT").innerHTML=data.EMAIL_ENT;
              document.getElementById("EMAIL_ENTh").href="mailto:"+data.EMAIL_ENT;
              document.getElementById("NUM_TEL_ENT").innerHTML=data.NUM_TEL_ENT;
              document.getElementById("PAYS_ORG_ENT").innerHTML=data.PAYS_ORG_ENT;
              document.getElementById("NB_SAL_ENT").innerHTML=data.NB_SAL_ENT; 
              var spdatcre = data.DAT_CREA_ENT.split('-');
              if(spdatcre[1]<10){
                spdatcre[1]=spdatcre[1][1];
              }
              document.getElementById("DAT_CREA_ENT").innerHTML = spdatcre[2]+' '+liste[spdatcre[1]-1]+' '+spdatcre[0];
              document.getElementById("DESC_ENT").innerHTML=data.DESC_ENT;
              document.getElementById("URL_WEB_ENT").href=data.URL_WEB_ENT;
              document.getElementById("EMAIL_REC").innerHTML=data.EMAIL_REC;
              document.getElementById("EMAIL_RECh").href="mailto:"+data.EMAIL_REC;
              document.getElementById("ADRESSE_ENT").innerHTML=data.ADRESSE_ENT+","+data.VILLE_ENT+","+data.COD_POST_ENT;
              document.getElementById("LOGO_ENT").src=data.LOGO_ENT;
              document.getElementById("URL_LINK_ENT").href=data.URL_LINK_ENT;
              document.getElementById("URL_FB_ENT").href=data.URL_FB_ENT;
              document.getElementById("mailRECL").href="mailto:"+data.EMAIL_REC+";"+data.EMAIL_ENT;
              //date
              var request1 = new XMLHttpRequest()
              request1.open('GET','http://192.168.43.96:3000/horaires', true)
              request1.onload = function()
              {
                  // Begin accessing JSON data here
                  var data = JSON.parse(this.response)
                  console.log(data);
                  
                      var ee = document.getElementById("horaireconf");
                      ee.innerHTML="";
                  data.forEach(i => {
                      if (i.ID_RECRUTEUR==idREC){
                      if (i.TIME_DEB_MATIN ==="" && i.TIME_DEB_MIDI===""){
                          ch = `
                          <li>
                              <div class="row">
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"><i class="fas fa-calendar-alt"></i>&ensp;&ensp;` + i.JOUR_TRAV+ ` : </a> 
                              </div>
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"> Fermé </a>
                              </div>
                              </div>
                              </li>
                          `;
                          ee.insertAdjacentHTML('beforeend',ch);
                      }else if (i.TIME_DEB_MATIN ==="" && i.TIME_FIN_MATIN===""){
                          ch = `
                          <li>
                              <div class="row">
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"><i class="fas fa-calendar-alt"></i>&ensp;&ensp;` + i.JOUR_TRAV+ ` : </a> 
                              </div>
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"> ` + i.TIME_DEB_MIDI+ `-` + i.TIME_FIN_MIDI+`  </a>
                              </div>
                              </div>
                              </li>
                          `;
                          ee.insertAdjacentHTML('beforeend',ch);
                      }else if (i.TIME_DEB_MIDI ==="" && i.TIME_FIN_MIDI===""){
                          ch = `
                          <li>
                              <div class="row">
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"><i class="fas fa-calendar-alt"></i>&ensp;&ensp;` + i.JOUR_TRAV+ ` : </a> 
                              </div>
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"> ` + i.TIME_DEB_MATIN+ `-` + i.TIME_FIN_MATIN+`  </a>
                              </div>
                              </div>
                              </li>
                          `;
                          ee.insertAdjacentHTML('beforeend',ch);
                          }else if (i.TIME_FIN_MATIN ==="" && i.TIME_DEB_MIDI===""){
                          ch = `
                          <li>
                              <div class="row">
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"><i class="fas fa-calendar-alt"></i>&ensp;&ensp;` + i.JOUR_TRAV+ ` : </a> 
                              </div>
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"> ` + i.TIME_DEB_MATIN+ `-` + i.TIME_FIN_MIDI+`  </a>
                              </div>
                              </div>
                              </li>
                          `;
                          ee.insertAdjacentHTML('beforeend',ch);
                          }else{
                          ch = `
                          <li>
                              <div class="row">
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary"><i class="fas fa-calendar-alt"></i>&ensp;&ensp;` + i.JOUR_TRAV+ ` : </a> 
                              </div>
                              <div class="col-md-6">
                                  <a  class="btn-link text-secondary">` + i.TIME_DEB_MATIN+ `-` + i.TIME_FIN_MATIN+` & ` + i.TIME_DEB_MIDI+ `-` + i.TIME_FIN_MIDI+` </a>
                              </div>
                              </div>
                              </li>
                          `;
                          ee.insertAdjacentHTML('beforeend',ch);
                          
                          }
                      } 
                  })      
              }   
                      // Send request
              request1.send();
              } else {
                      var ch = `<div class="row">
                                  <div class="col-sm-12 tit">        
                                      <span >Ce recruteur est supprimé</span>
                                  </div>
                                </div>`;
                      document.getElementById("cotenuREC").innerHTML = ch;  
                          
              }
            }else{
              console.log("error"); 
            }
            }   
        // Send request
        request2.send();
        var datenv = data.createdAt.split('T');
        var datenvsp = datenv[0].split('-');
        var timenv = datenv[1].split('.');
          if(datenvsp[1]<10){
            datenvsp[1]=datenvsp[1][1];
          }
        document.getElementById("dateRECL").innerHTML = datenvsp[2] +' '+liste[datenvsp[1]-1]+' '+datenvsp[0]+ ' à '+timenv[0];
     
      } else {
          console.log("error");
      }
    }
    xhr3.send(null);
    function alertdemRECL(X) {
      var url3 = "http://192.168.43.96:3000/demandeurs/" + X ;
    var xhr3 = new XMLHttpRequest();
    xhr3.open("GET", url3, true);

    xhr3.onload = function () {
      var data = JSON.parse(xhr3.responseText);
      if (xhr3.readyState == 4 && xhr3.status == "200") {
          document.getElementById("photoDEMRECL").src = data.PHOTO_DEM;
          document.getElementById("nompreDEMRECL").innerHTML = data.NOM_DEM + ' '+ data.PRE_DEM;
          document.getElementById("specDEMRECL").innerHTML = data.SPES_DEM;
          document.getElementById("paysvilleDEMRECL").innerHTML = data.PAYS_DEM + ', '+ data.VILLE_DEM;
          document.getElementById("adressecopDEMRECL").innerHTML = data.ADRESSE_DEM + ', '+ data.COD_POST_DEM;
          document.getElementById("numtelDEMRECL").innerHTML = data.NUM_TEL_DEM;
          document.getElementById("emailDEMRECL").innerHTML = data.EMAIL_DEM;
          document.getElementById("emailDEMRECL").href = "mailto:"+data.EMAIL_DEM;
          document.getElementById("urllinkDEMRECL").innerHTML = data.NOM_DEM + '-'+ data.PRE_DEM;
          document.getElementById("urlfbDEMRECL").innerHTML = data.NOM_DEM + ' '+ data.PRE_DEM;
          document.getElementById("urllinkDEMRECL").href = data.URL_LINK_DEM;
          document.getElementById("urlfbDEMRECL").href = data.URL_FB_DEM;
          var spdatnais = data.DAT_NAI_DEM.split('-');
          if(spdatnais[1]<10){
            spdatnais[1]=spdatnais[1][1];
          }
          document.getElementById("datnaisDEMRECL").innerHTML = spdatnais[2]+' '+liste[spdatnais[1]-1]+' '+spdatnais[0];
          document.getElementById("listprofilRECL").innerHTML = data.DESC_DEM;
          document.getElementById("sexeDEMRECL").innerHTML = data.SEXE_DEM;

          if (data.PERMIS_COND_DEM == "1"){
                    ch=`<span id="permisDEMRECL">Permis:</span> <span id="typepermisDEMRECL">`+data.TYPE_PERMIS_DEM+`</span> `;
                    document.getElementById("listpermis").innerHTML = ch;
                  }else{
                    document.getElementById("listpermis").innerHTML = 'Pas de permis';
                  }
          var request1 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request1.open('GET', "http://192.168.43.96:3000/qualites", true);
              request1.onload = function()
              {
                // Begin accessing JSON data here
                var data1 = JSON.parse(this.response);
                console.log(data1);
                var ee = document.getElementById("qualiteDEMRECL");
                ee.innerHTML="";
                var nb=0;
                data1.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                      ch ="<li><span >"+j.NOM_QUA+"</span></li>";
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb +=1;
                  }
                })
                if (nb == 0){
                    var lii = document.createElement("li");
                    lii.innerText = "Pas de qualité";
                    ee.appendChild(lii);
                }
              }
              // Send request
          request1.send();
          var request2 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request2.open('GET', "http://192.168.43.96:3000/languedemandeurs", true);
              request2.onload = function()
              {
                // Begin accessing JSON data here
                var data2 = JSON.parse(this.response);
                console.log(data2);
                var ee = document.getElementById("listlangueDEMRECL");
                ee.innerHTML="";
                var nb=0;
                data2.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                      var request3 = new XMLHttpRequest();
                      request3.open('GET', "http://192.168.43.96:3000/langues/"+j.ID_LANGUE, true);
                      request3.onload = function()
                      {
                        var data3 = JSON.parse(this.response);
                        var num=j.NIV_LANG_DEM;
                        if(num==="1"){ 
                                  ch = `<li><span >`+data3.NOM_LANG+`</span>  :
                                            <span class="fas fa-star checked1" id="star11"></span>
                                            <span class="far fa-star checked1" id="star22"></span>
                                            <span class="far fa-star checked1" id="star33"></span>
                                            <span class="far fa-star checked1" id="star44"></span>
                                            <span class="far fa-star checked1" id="star55"></span>
                                        </li>    

                                  `;
                                  ee.insertAdjacentHTML('beforeend',ch);
                          }
                        if(num=="2"){
                          ch = `<li><span >`+data3.NOM_LANG+`</span>  :
                                  <span class="fas fa-star checked1" id="star11"></span>
                                  <span class="fas fa-star checked1" id="star22"></span>
                                  <span class="far fa-star checked1" id="star33"></span>
                                  <span class="far fa-star checked1" id="star44"></span>
                                  <span class="far fa-star checked1" id="star55"></span>
                                </li>
                                  `;
                                  ee.insertAdjacentHTML('beforeend',ch);
                        }
                        if(num=="3"){
                          ch = `<li><span >`+data3.NOM_LANG+`</span>  :
                                  <span class="fas fa-star checked1" id="star11"></span>
                                  <span class="fas fa-star checked1" id="star22"></span>
                                  <span class="fas fa-star checked1" id="star33"></span>
                                  <span class="far fa-star checked1" id="star44"></span>
                                  <span class="far fa-star checked1" id="star55"></span>
                                </li>
                                  `;
                                  ee.insertAdjacentHTML('beforeend',ch);
                        }
                        if(num=="4"){
                          ch = `<li><span >`+data3.NOM_LANG+`</span>  :
                                  <span class="fas fa-star checked1 " id="star11"></span>
                                  <span class="fas fa-star checked1  " id="star22"></span>
                                  <span class="fas fa-star checked1  " id="star33"></span>
                                  <span class="fas fa-star checked1 " id="star44"></span>
                                  <span class="far fa-star checked1" id="star55"></span>
                                </li>
                                  `;
                                  ee.insertAdjacentHTML('beforeend',ch);
                        }
                        if(num=="5"){
                          ch = `  <li><span >`+data3.NOM_LANG+`</span>  :
                                    <span class="fas fa-star checked1 " id="star11"></span>
                                    <span class="fas fa-star checked1 " id="star22"></span>
                                    <span class="fas fa-star checked1 " id="star33"></span>
                                    <span class="fas fa-star checked1 " id="star44"></span>
                                    <span class="fas fa-star checked1 " id="star55"></span>
                                  </li>
                                  `;
                                  ee.insertAdjacentHTML('beforeend',ch); 

                        }    
                      }
                      request3.send();
                      nb +=1;
                  }
                })
                if (nb == 0){
                    var lii = document.createElement("li");
                    lii.innerText = "Pas de langue";
                    ee.appendChild(lii);
                }
          }
          request2.send();
          var request4 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request4.open('GET', "http://192.168.43.96:3000/centresinterets", true);
              request4.onload = function()
              {
                // Begin accessing JSON data here
                var data4 = JSON.parse(this.response);
                console.log(data4);
                var nb=0;
                var ee = document.getElementById("centreintDEMRECL");
                ee.innerHTML="";
                data4.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                      ch ="<li><span >"+j.NOM_CI+"</span></li>";
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb +=1;
                  }
                })
                if (nb == 0){
                    var lii = document.createElement("li");
                    lii.innerText = "Pas de centre d'interet";
                    ee.appendChild(lii);
                }
              }
              // Send request
          request4.send();
          var dateCrea = data.createdAt.split('T');
          var spdatcre = dateCrea[0].split('-');
          if(spdatcre[1]<10){
            spdatcre[1]=spdatcre[1][1];
          }
          document.getElementById("datecreaDEMRECL").innerHTML = spdatcre[2]+' '+liste[spdatcre[1]-1]+' '+spdatcre[0];
          var dateMSJ = data.updatedAt.split('T');
          var spdatmsj = dateMSJ[0].split('-');
          if(spdatmsj[1]<10){
            spdatmsj[1]=spdatmsj[1][1];
          }
          document.getElementById("datemsjDEMRECL").innerHTML = spdatmsj[2]+' '+liste[spdatmsj[1]-1]+' '+spdatmsj[0];
          var request5 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request5.open('GET', "http://192.168.43.96:3000/experiences", true);
              request5.onload = function()
              {
                // Begin accessing JSON data here
                var data5 = JSON.parse(this.response);
                console.log(data5);
                var ee = document.getElementById("listEXPRECL");
                ee.innerHTML="";
                var nb=0;
                data5.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                    var tabDEB = j.DAT_DEB_EXP.split('-');
                    var tabFIN = j.DAT_FIN_EXP.split('-');
                    if(tabDEB[1]<10){
                      tabDEB[1]=tabDEB[1][1];
                    }
                    if(tabFIN[1]<10){
                      tabFIN[1]=tabFIN[1][1];
                    }
                      ch = `<p ><b><i>`+j.TYPE_EXP+`</i></b></p>    
                                    <p >`+j.NOM_ENT_EXP+`  |  `+liste[tabDEB[1]-1]+` `+tabDEB[0]+ ` - `+liste[tabFIN[1]-1]+` `+tabFIN[0]+`</p>
                                    <p >`+j.POSITION_EXP+`</p>
                                    <p >`+j.DESC_EXP+`</p>
                                    <p >`+j.OUTIL_EXP+`</p> `;
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb+=1;
                  }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas d'experience";
                    ee.appendChild(pp);
                }
              }
              // Send request
          request5.send();
          var request6 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request6.open('GET', "http://192.168.43.96:3000/formations", true);
              request6.onload = function()
              {
                // Begin accessing JSON data here
                var data6 = JSON.parse(this.response);
                console.log(data6);
                var ee = document.getElementById("listFORRECL");
                ee.innerHTML="";
                var nb=0;
                data6.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                    var tabDEB = j.DAT_DEB_FOR.split('-');
                    var tabFIN = j.DAT_FIN_FOR.split('-');
                    if(tabDEB[1]<10){
                      tabDEB[1]=tabDEB[1][1];
                    }
                    if(tabFIN[1]<10){
                      tabFIN[1]=tabFIN[1][1];
                    }
                      ch = `<p ><b><i>`+j.NOM_FOR+`</i></b></p>    
                                    <p >`+liste[tabDEB[1]-1]+` `+tabDEB[0]+` - `+liste[tabFIN[1]-1]+` `+tabFIN[0]+`</p>
                                    <p >`+j.DESC_FOR+`</p> `;
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb+=1;
                  }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas de formation";
                    ee.appendChild(pp);
                }
              }
              // Send request
          request6.send();
          var request7 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request7.open('GET', "http://192.168.43.96:3000/certifications", true);
              request7.onload = function()
              {
                // Begin accessing JSON data here
                var data7 = JSON.parse(this.response);
                console.log(data7);
                var ee = document.getElementById("listCERTRECL");
                ee.innerHTML="";
                var nb=0;
                data7.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                      ch = `<p ><b><i>`+j.NOM_CERT+`</i></b></p>    
                                    <p >`+j.REF_CERT+`</p>
                                    <p >`+j.DESC_CERT+`</p> `;
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb+=1;
                  }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas de certificat";
                    ee.appendChild(pp);
                }
              }
              // Send request
          request7.send();
          var request8 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request8.open('GET', "http://192.168.43.96:3000/projets", true);
              request8.onload = function()
              {
                // Begin accessing JSON data here
                var data8 = JSON.parse(this.response);
                console.log(data8);
                var ee = document.getElementById("listPROJRECL");
                ee.innerHTML="";
                var nb=0;
                data8.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                    var tabDEB = j.DAT_DEB_PROJ.split('-');
                    var tabFIN = j.DAT_FIN_PROJ.split('-');
                    if(tabDEB[1]<10){
                      tabDEB[1]=tabDEB[1][1];
                    }
                    if(tabFIN[1]<10){
                      tabFIN[1]=tabFIN[1][1];
                    }
                      ch = `<p ><b><i>`+j.NOM_PROJ+`</i></b></p> 
                                    <p >`+j.TYPE_PROJ+`</p>   
                                    <p >`+liste[tabDEB[1]-1]+` `+tabDEB[0]+` - `+liste[tabFIN[1]-1]+` `+tabFIN[0]+`</p>
                                    <p >`+j.DESC_PROJ+`</p>
                                    <p >`+j.OUTIL_PROJ+`</p> `;
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb+=1;
                  }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas de projet";
                    ee.appendChild(pp);
                }
              }
              // Send request
          request8.send();
          var request9 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request9.open('GET', "http://192.168.43.96:3000/vieassociatives", true);
              request9.onload = function()
              {
                // Begin accessing JSON data here
                var data9 = JSON.parse(this.response);
                console.log(data9);
                var ee = document.getElementById("listVARECL");
                ee.innerHTML="";
                var nb=0;
                data9.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                    var tabDEB = j.DAT_DEB_VA.split('-');
                    var tabFIN = j.DAT_FIN_VA.split('-');
                    if(tabDEB[1]<10){
                      tabDEB[1]=tabDEB[1][1];
                    }
                    if(tabFIN[1]<10){
                      tabFIN[1]=tabFIN[1][1];
                    }
                      ch = `<p ><b><i>`+j.NOM_VA+`</i></b></p>  
                                <p >`+j.POSITION_VA+`  |  `+liste[tabDEB[1]-1]+` `+tabDEB[0]+` - `+liste[tabFIN[1]-1]+` `+tabFIN[0]+`</p>`;
                      ee.insertAdjacentHTML('beforeend',ch);
                      nb+=1;
                    }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas de vie associative";
                    ee.appendChild(pp);
                }
              }
              // Send request
          request9.send();
          var request10 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request10.open('GET', "http://192.168.43.96:3000/competencedemandeurs", true);
              request10.onload = function()
              {
                // Begin accessing JSON data here
                var data10 = JSON.parse(this.response);
                console.log(data10);
                /*var ee1 = document.getElementById("listCOMP1RECL");
                ee1.innerHTML="";
                var nbee1=0;
                var ee2 = document.getElementById("listCOMP2RECL");
                ee2.innerHTML="";
                var nbee2=0;*/
                var ee = document.getElementById("pasCOMPRECL");
                ee.innerHTML="";
                var nb=0;
                var ull = document.createElement("ul");
                ull.id="listCOMPRECL";
                ee.appendChild(ull);
                var eeul = document.getElementById("listCOMPRECL");
                eeul.innerHTML="";
                data10.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                      var request11 = new XMLHttpRequest();
                      request11.open('GET', "http://192.168.43.96:3000/competences/"+j.ID_COMPETENCE, true);
                      request11.onload = function()
                      {
                        var data11 = JSON.parse(this.response);
                        console.log(data11);
                        var num=j.NIV_COMP_DEM;
                        if(num=="1"){ 
                                  ch = `<li><span >`+data11.NOM_COMP+`</span>  :
                                            <span class="fas fa-star checked1" ></span>
                                            <span class="far fa-star checked1" ></span>
                                            <span class="far fa-star checked1" ></span>
                                            <span class="far fa-star checked1" ></span>
                                            <span class="far fa-star checked1" ></span>
                                        </li>    

                                  `;
                                  eeul.insertAdjacentHTML('beforeend',ch); 
                          }
                        if(num=="2"){
                          ch = `<li><span >`+data11.NOM_COMP+`</span>  :
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="far fa-star checked1" ></span>
                                  <span class="far fa-star checked1" ></span>
                                  <span class="far fa-star checked1" ></span>
                                </li>
                                  `;
                                  eeul.insertAdjacentHTML('beforeend',ch); 
                        }
                        if(num=="3"){
                          ch = `<li><span >`+data11.NOM_COMP+`</span>  :
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="far fa-star checked1" ></span>
                                  <span class="far fa-star checked1" ></span>
                                </li>
                                  `;
                                  eeul.insertAdjacentHTML('beforeend',ch); 
                        }
                        if(num=="4"){
                          ch = `<li><span >`+data11.NOM_COMP+`</span>  :
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="fas fa-star checked1" ></span>
                                  <span class="far fa-star checked1" ></span>
                                </li>
                                  `;
                                  eeul.insertAdjacentHTML('beforeend',ch); 
                        }
                        if(num=="5"){
                          ch = `  <li><span >`+data11.NOM_COMP+`</span>  :
                                    <span class="fas fa-star checked1 " ></span>
                                    <span class="fas fa-star checked1 " ></span>
                                    <span class="fas fa-star checked1 " ></span>
                                    <span class="fas fa-star checked1 " ></span>
                                    <span class="fas fa-star checked1 " ></span>
                                  </li>
                                  `;
                                  eeul.insertAdjacentHTML('beforeend',ch); 
                        }  
 
                      }
                      request11.send();
                      nb +=1;
                  }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas de compétence";
                    ee.appendChild(pp);
                }
          }
          request10.send();
          var request12 = new XMLHttpRequest();
              // Open a new connection, using the GET request on the URL endpoint
              request12.open('GET', "http://192.168.43.96:3000/diplomedemandeurs", true);
              request12.onload = function()
              {
                // Begin accessing JSON data here
                var data12 = JSON.parse(this.response);
                console.log(data12);
                var ee = document.getElementById("listDIPRECL");
                ee.innerHTML="";
                var nb=0;
                data12.forEach(j => {
                  if(j.ID_DEMANDEUR==X){
                    var tabDEB = j.DAT_DEB_DIP.split('-');
                    var tabFIN = j.DAT_FIN_DIP.split('-');
                    if(tabDEB[1]<10){
                      tabDEB[1]=tabDEB[1][1];
                    }
                    if(tabFIN[1]<10){
                      tabFIN[1]=tabFIN[1][1];
                    }
                      var request13 = new XMLHttpRequest();
                      request13.open('GET', "http://192.168.43.96:3000/diplomes/"+j.ID_DIPLOME, true);
                      request13.onload = function()
                      {
                        var data13 = JSON.parse(this.response);
                        ch = `<p ><b><i>`+data13.TYPE_DIP+`</i></b></p>    
                                    <p >`+j.NOM_ECOL_DIP+`  |  `+liste[tabDEB[1]-1]+` `+tabDEB[0]+` - `+liste[tabFIN[1]-1]+` `+tabFIN[0]+`</p>
                                    <p >`+j.SPECIA_DIP+`</p> `;
                        ee.insertAdjacentHTML('beforeend',ch);  
                      }
                      request13.send();
                      nb +=1;
                  }
                })
                if (nb == 0){
                    var pp = document.createElement("p");
                    pp.innerText = "Pas de diplôme";
                    ee.appendChild(pp);
                }
          }
          request12.send();
      } else {
          console.log("error");
      }
    }
    xhr3.send(null);
    }

    function updateREC(){
          Swal.fire({
          title: "Voulez-vous Archiver cette Recruteur ?",
          icon: 'question',
          showDenyButton: true,
          confirmButtonColor: '#17a2b8',
          confirmButtonText: 'Archiver',
          denyButtonText: `Non`,
        }).then((result) => {
          if (result.isConfirmed) {
            var request = new XMLHttpRequest()
            
            // Open a new connection, using the GET request on the URL endpoint
            request.open('GET', 'http://192.168.43.96:3000/recruteurs/'+ idREC, true)
            
            request.onload = function() {
                // Begin accessing JSON data here
                var data = JSON.parse(this.response)
                console.log(data);
                var url3 = "http://192.168.43.96:3000/recruteurs/" + idREC ;
                var data2 = {};
                data2.NOM_ENT=data.NOM_ENT;
                data2.SEC_DACT_ENT=data.SEC_DACT_ENT;
                data2.IDENT_UNQ_ENT=data.IDENT_UNQ_ENT;
                data2.EMAIL_ENT=data.EMAIL_ENT;
                data2.NUM_TEL_ENT=data.NUM_TEL_ENT;
                data2.PAYS_ORG_ENT=data.PAYS_ORG_ENT;
                data2.NB_SAL_ENT=data.NB_SAL_ENT; 
                data2.DAT_CREA_ENT=data.DAT_CREA_ENT;
                data2.DESC_ENT=data.DESC_ENT;
                data2.URL_WEB_ENT=data.URL_WEB_ENT;
                data2.EMAIL_REC=data.EMAIL_REC;
                data2.PSW_REC=data.PSW_REC;
                data2.ADRESSE_ENT=data.ADRESSE_ENT;
                data2.VILLE_ENT=data.VILLE_ENT;
                data2.COD_POST_ENT=data.COD_POST_ENT;
                data2.VALID_ENT=data.VALID_ENT;
                data2.ARCHIV_REC ="1";
                data2.X=data.X;
                data2.Y=data.Y;
                data2.LOGO_ENT=data.LOGO_ENT;
                data2.URL_LINK_ENT=data.URL_LINK_ENT;
                data2.URL_FB_ENT=data.URL_FB_ENT;
                console.log(data2);
                var json = JSON.stringify(data2);
                var xhr3 = new XMLHttpRequest();
                xhr3.open("PUT", url3, true);
                xhr3.setRequestHeader('Content-type','application/json; charset=utf-8');
                xhr3.onload = function () {
                    if (xhr3.readyState == 4 && xhr3.status == "200") {
                        //location.replace("archiveAdmin.html");
                        //event.preventDefault();
                        Swal.fire({
                            title:'Compte Recruteur Est Archivé !',
                            icon:'success',
                        
                        }).then((result) => {
                            if (result.isConfirmed){
                            location.replace("ReclamationDemEntret.html");
                            event.preventDefault();
                            }

                        })
                    } else {
                        console.log("error");
                        Swal.fire({
                                    icon:'error',  
                                    title:'Il y a un erreur !',
                                    showConfirmButton:true,
                                    timer:1500
                                        
                                    
                                    })
                    }
                }
                xhr3.send(json);
            }
            request.send();
        }
        else if (result.isDenied){
           Swal.fire("Archive Non Enregistrer", '', 'info');
        }
      })
    } 
  </script>
  <script>
    var url_string = window.location.href
              var url = new URL(url_string);
              var c = url.searchParams.get("id");
              var request55 = new XMLHttpRequest()
              
              // Open a new connection, using the GET request on the URL endpoint
              request55.open('GET', 'http://192.168.43.96:3000/recruteurs/'+ c, true)
              
              request55.onload = function() {
                  // Begin accessing JSON data here
                  var data55 = JSON.parse(this.response)
    var locations = [
      [
        '<b>Name 1</b><br>Address Line 1<br>Bismarck, ND 58501<br>Phone: 701-555-1234<br><a href="#" >Link<a> of some sort.',
        data55.X,
        data55.Y,
        4,
      ],
      
      /*
       * Next point on map
       *   -Notice how the last number within the brackets incrementally increases from the prior marker
       *   -Use http://itouchmap.com/latlong.html to get Latitude and Longitude of a specific address
       *   -Follow the model below:
       *      ['<b>Name 3</b><br>Address Line 1<br>City, ST Zipcode<br>Phone: ###-###-####<br><a href="#" target="_blank">Link<a> of some sort.', ##.####, -##.####, #]
       */
    ];
    console.log(data55.X);
    console.log(data55.Y);
    var map = new google.maps.Map(document.getElementById("map"), {
      zoom: 7,
      /* Zoom level of your map */
      center: new google.maps.LatLng(35.47021625, 10.47173475),
      /* coordinates for the center of your map */
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    });
  
    var infowindow = new google.maps.InfoWindow();
  
    var marker, i;
  
    for (i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map,
      });
  
      google.maps.event.addListener(
        marker,
        "click",
        (function (marker, i) {
          return function () {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
          };
        })(marker, i)
      );
    }
              }
              request55.send()
  </script>
</body>
</html>
